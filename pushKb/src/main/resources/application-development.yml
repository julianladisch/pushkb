micronaut:
  netty:
    event-loops:
      other:
        num-threads: 10
        prefer-native-transport: true
  http:
    client:
      event-loop-group: other
      read-timeout: 30
      max-content-length: 2147483647 # This strikes me as a bit dangerous, but 10MB causes issues from GOKB for some reason

  server:
    port: 8060
  application:
    name: pushKb
    #jvm: ## These seem to do nothing
    #  options:
    #    -Xms512m
    #    -Xmx2g
  security:
    # FIXME Re-enable this later
    enabled: false
    authentication: idtoken
    oauth2:
      clients:
        keycloak:
          client-secret: '${OAUTH_CLIENT_SECRET:secret}'
          client-id: '${OAUTH_CLIENT_ID:pushKB}'
          openid:
            issuer: '${OIDC_ISSUER_DOMAIN:`http://localhost:8060`}/realms/${KEYCLOAK_REALM:master}' 
    endpoints:
      logout:
        get-allowed: true
  #router:
  #  static-resources:
  #    swagger:
  #      enabled: true
  #      paths: classpath:META-INF/swagger
  #      mapping: /openapi/**
  #    swagger-ui:
  #      enabled: true
  #      paths: classpath:META-INF/swagger/views/swagger-ui
  #      mapping: /openapi/ui/**
  #    redoc:
  #      paths: classpath:META-INF/swagger/views/redoc
  #      mapping: /openapi/redoc/**
  ## FIXME SHOULD FIGURE OUT SECURITY AT SOME PT
  #security:
  #  authentication: idtoken
  #  token:
  #    jwt:
  #      enabled: true
  #      signatures.jwks.keycloak:
  #        url: ${KEYCLOAK_CERT_URL:""}
  #  intercept-url-map:
  #    - pattern: "/openapi/**"
  #      access:
  #        - isAnonymous()
  data:
    pageable:
      max-page-size: 1000

db:
  host: localhost
  port: 6543
  database: pushkb
  username: pushkb
  password: pushkb


endpoints:
  prometheus:
    sensitive: false
  health:
    enabled: true
    sensitive: false # non-secured endpoint
    details-visible: ANONYMOUS # show details for everyone
    ingest:
      enabled: true
  info:
    enabled: true
    sensitive: false
